# ==============================================
# SKYRAKSYS HRM PRODUCTION ENVIRONMENT FILE
# ==============================================
# üéØ NOVICE USER FRIENDLY VERSION
# 
# ‚úÖ EASY SETUP: This file contains the EXACT passwords from the manual guide
# ‚úÖ NO GUESSWORK: All values match the documentation examples
# ‚úÖ READY TO USE: Just copy this to /opt/skyraksys-hrm/.env
#
# üîê SECURITY NOTE: 
# These are EXAMPLE passwords from the documentation.
# For PRODUCTION security, generate new passwords using the commands in Section 8.2
#
# Generated: October 6, 2025
# For: RHEL 9.6 Production Environment  
# Manual Guide: redhatprod/NOVICE_MANUAL_SETUP_GUIDE.md

# ==============================================
# APPLICATION CONFIGURATION
# ==============================================
NODE_ENV=production
PORT=5000
FRONTEND_PORT=3000

# Domain/URL Configuration
# NOVICE SETUP: Replace 95.216.14.232 with your server IP
DOMAIN=95.216.14.232
API_BASE_URL=http://95.216.14.232/api
FRONTEND_URL=http://95.216.14.232

# ==============================================
# DATABASE CONFIGURATION (PostgreSQL)
# ==============================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=skyraksys_hrm_prod
DB_USER=hrm_app
# NOVICE USERS: Get password from /opt/skyraksys-hrm/.db_password (created by 02_setup_database.sh)
# Run: cat /opt/skyraksys-hrm/.db_password
DB_PASSWORD=GET_FROM_DB_PASSWORD_FILE
DB_DIALECT=postgres
DB_SSL=false

# Database Seeding (set to false in production after initial setup)
# Enable temporarily for initial setup with sample data
SEED_DEMO_DATA=false

# Database Connection Pool
DB_POOL_MAX=10
DB_POOL_MIN=2
DB_POOL_ACQUIRE=60000
DB_POOL_IDLE=30000

# ==============================================
# SECURITY CONFIGURATION (CRITICAL)
# ==============================================

# JWT Configuration
# CRITICAL: Generate strong secrets using: openssl rand -base64 64
# NOVICE USERS: These are example values - generate new ones for security
JWT_SECRET=CHANGE_THIS_TO_SECURE_64_CHAR_SECRET_RUN_openssl_rand_base64_64
JWT_REFRESH_SECRET=CHANGE_THIS_TO_DIFFERENT_64_CHAR_SECRET_RUN_openssl_rand_base64_64
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Session Configuration
# Generate secure session secret: openssl rand -base64 48
SESSION_SECRET=CHANGE_THIS_TO_SECURE_SESSION_SECRET_RUN_openssl_rand_base64_48
SESSION_NAME=skyraksys_hrm_session
SESSION_MAX_AGE=86400000

# Password Security
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=true

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# ==============================================
# EMAIL CONFIGURATION (OPTIONAL)
# ==============================================
# Email is optional - system works without it
# Enable only if you have SMTP credentials configured

SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
FROM_EMAIL=noreply@skyraksys.com
FROM_NAME=SKYRAKSYS HRM System

# Email Feature Flags
EMAIL_VERIFICATION_ENABLED=true
PASSWORD_RESET_ENABLED=true
NOTIFICATION_EMAIL_ENABLED=true

# ==============================================
# FILE UPLOAD CONFIGURATION
# ==============================================
UPLOAD_PATH=/opt/skyraksys-hrm/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx,xls,xlsx,csv
TEMP_UPLOAD_PATH=/tmp/hrm-uploads

# PDF Generation
PDF_OUTPUT_PATH=/opt/skyraksys-hrm/uploads/payslips
PDF_TEMP_PATH=/tmp/hrm-pdfs
PAYSLIP_PDF_ENABLED=true

# ==============================================
# LOGGING CONFIGURATION
# ==============================================
LOG_LEVEL=info
LOG_FILE=/var/log/skyraksys-hrm/application.log
ERROR_LOG_FILE=/var/log/skyraksys-hrm/error.log
ACCESS_LOG_FILE=/var/log/skyraksys-hrm/access.log
AUDIT_LOG_FILE=/var/log/skyraksys-hrm/audit.log
LOG_MAX_FILES=30
LOG_MAX_SIZE=10m

# ==============================================
# COMPANY INFORMATION
# ==============================================
COMPANY_NAME=SKYRAKSYS TECHNOLOGIES LLP
COMPANY_ADDRESS=Plot-No: 27E, G.S.T. Road, Guduvanchery, Chennai, Tamil Nadu, 603202 India
COMPANY_EMAIL=info@skyraksys.com
COMPANY_PHONE=+91 89398 88577
COMPANY_WEBSITE=https://www.skyraksys.com
COMPANY_GST=33AABCS1234C1Z5
COMPANY_PAN=AABCS1234C
COMPANY_CIN=U72900TN2019PTC134567

# ==============================================
# PAYROLL CONFIGURATION
# ==============================================
DEFAULT_WORKING_DAYS=22
DEFAULT_WORKING_HOURS=8
PF_RATE=12
PF_MAX_LIMIT=1800
PROFESSIONAL_TAX_RATE=200
PROFESSIONAL_TAX_LIMIT=15000
ESI_RATE=0.75
ESI_SALARY_LIMIT=25000
TDS_EXEMPTION_LIMIT=50000

# Payroll Processing
PAYROLL_CUTOFF_DAY=25
PAYROLL_PAYMENT_DAY=30
AUTO_PAYROLL_GENERATION=false

# ==============================================
# LEAVE MANAGEMENT
# ==============================================
DEFAULT_ANNUAL_LEAVE=21
DEFAULT_SICK_LEAVE=12
DEFAULT_CASUAL_LEAVE=12
LEAVE_APPROVAL_REQUIRED=true
LEAVE_CARRY_FORWARD=true
MAX_CARRY_FORWARD_DAYS=5

# ==============================================
# TIMESHEET CONFIGURATION
# ==============================================
TIMESHEET_WEEKLY_SUBMISSION=true
TIMESHEET_APPROVAL_REQUIRED=true
MAX_HOURS_PER_DAY=12
MIN_HOURS_PER_DAY=1
OVERTIME_THRESHOLD=8

# ==============================================
# SECURITY HEADERS AND CORS
# ==============================================

# CORS Configuration
# NOVICE SETUP: Replace 95.216.14.232 with your server IP
CORS_ORIGIN=http://95.216.14.232
ALLOWED_ORIGINS=http://95.216.14.232

# Trust Proxy (important when behind Nginx)
TRUST_PROXY=true

# Cookie Security
SECURE_COOKIES=true
COOKIE_SAMESITE=strict

# Security Headers (helmet.js)
HELMET_ENABLED=true
CSRF_PROTECTION=true
XSS_PROTECTION=true
FRAME_OPTIONS=DENY

# Optional: Allow all origins (ONLY for development/troubleshooting)
# NEVER enable in production
CORS_ALLOW_ALL=false

# ==============================================
# RATE LIMITING (aligned with server.js)
# ==============================================

# General API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=300

# Authentication Endpoints Rate Limiting (stricter)
RATE_LIMIT_AUTH_ENABLED=true
RATE_LIMIT_AUTH_WINDOW_MS=900000
RATE_LIMIT_AUTH_MAX=20

# ==============================================
# BACKUP CONFIGURATION
# ==============================================
BACKUP_RETENTION_DAYS=30
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_PATH=/opt/skyraksys-hrm/backups
BACKUP_ENCRYPTION=true

# ==============================================
# MONITORING AND HEALTH CHECKS
# ==============================================

HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
PERFORMANCE_MONITORING=true
ERROR_TRACKING=true

# Status Monitor Dashboard (accessible at /status)
STATUS_MONITOR_ENABLED=true

# Health Check Configuration
DB_HEALTH_CHECK=true
REDIS_HEALTH_CHECK=true
EXTERNAL_API_HEALTH_CHECK=false

# ==============================================
# FEATURE FLAGS
# ==============================================
FEATURE_EMPLOYEE_SELF_SERVICE=true
FEATURE_MOBILE_APP=false
FEATURE_API_V2=false
FEATURE_ADVANCED_REPORTING=true
FEATURE_BULK_OPERATIONS=true

# ==============================================
# DEVELOPMENT/DEBUG (Set to false in production)
# ==============================================
DEBUG_MODE=false
VERBOSE_LOGGING=false
SQL_LOGGING=false
STACK_TRACE_IN_RESPONSE=false

# ==============================================
# EXTERNAL INTEGRATIONS (Optional)
# ==============================================
# SMS Configuration (Optional)
SMS_ENABLED=false
SMS_PROVIDER=
SMS_API_KEY=
SMS_FROM_NUMBER=

# Push Notifications (Optional)
PUSH_NOTIFICATIONS=false
FIREBASE_SERVER_KEY=

# Third-party APIs (Optional)
GOOGLE_API_KEY=
MICROSOFT_GRAPH_CLIENT_ID=
SLACK_WEBHOOK_URL=

# ==============================================
# üìã NOVICE USER SETUP CHECKLIST
# ==============================================
# 
# ‚úÖ STEP 1: Run the database setup script
#    sudo bash /opt/skyraksys-hrm/redhatprod/scripts/02_setup_database.sh
#
# ‚úÖ STEP 2: Get the database password
#    cat /opt/skyraksys-hrm/.db_password
#    Update DB_PASSWORD above with this value
#
# ‚úÖ STEP 3: Generate JWT secrets
#    openssl rand -base64 64
#    Run twice and update JWT_SECRET and JWT_REFRESH_SECRET
#
# ‚úÖ STEP 4: Generate session secret
#    openssl rand -base64 48
#    Update SESSION_SECRET with this value
#
# ‚úÖ STEP 5: Update your server IP
#    Replace all instances of 95.216.14.232 with your actual server IP
#    Update: DOMAIN, API_BASE_URL, FRONTEND_URL, CORS_ORIGIN, ALLOWED_ORIGINS
#
# ‚úÖ STEP 6: Copy this file to the backend directory
#    cp /opt/skyraksys-hrm/redhatprod/templates/.env.production.template /opt/skyraksys-hrm/backend/.env
#
# ‚úÖ STEP 7: Secure the .env file
#    chmod 600 /opt/skyraksys-hrm/backend/.env
#    chown hrmapp:hrmapp /opt/skyraksys-hrm/backend/.env
#
# ‚úÖ STEP 8: Verify all CHANGE_THIS_* and GET_FROM_* placeholders are updated
#    grep -E "CHANGE_THIS|GET_FROM" /opt/skyraksys-hrm/backend/.env
#    (Should return no matches if all placeholders are replaced)
#
# ‚úÖ STEP 9: Test the configuration
#    cd /opt/skyraksys-hrm/backend
#    sudo -u hrmapp npm test
#
# üîê SECURITY REMINDERS:
# - Never commit .env files to Git/version control
# - Keep a secure backup of your customized .env file
# - Disable SEED_DEMO_DATA after initial setup
# - Ensure all DEBUG_* flags are set to false
# - Verify TRUST_PROXY=true when behind Nginx
#
# üìñ Need Help? See:
# - Backend README: /opt/skyraksys-hrm/backend/README.md
# - Deployment Guide: /opt/skyraksys-hrm/redhatprod/DEPLOYMENT_GUIDE.md
# - Security Guide: /opt/skyraksys-hrm/docs/SECURITY.md
#
# ==============================================
